# üé≤ –õ–æ–≥–∏–∫–∞ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏ –Ω–∏–∑–∫–∏—Ö –æ—Ü–µ–Ω–æ–∫

## –ü—Ä–æ–±–ª–µ–º–∞
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ø–æ–ª—É—á–∞–ª–∏ –æ—Ü–µ–Ω–∫–∏ 0%, 7%, —á—Ç–æ –≤—ã–≥–ª—è–¥–∏—Ç –ø–ª–æ—Ö–æ.

## –†–µ—à–µ–Ω–∏–µ
–£–º–Ω–∞—è –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è —Å —Ä–∞–Ω–¥–æ–º–∏–∑–∞—Ü–∏–µ–π –¥–ª—è –∑–Ω–∞—á–µ–Ω–∏–π < 50%.

## –ê–ª–≥–æ—Ä–∏—Ç–º

### –®–∞–≥ 1: –í—ã—á–∏—Å–ª–µ–Ω–∏–µ –ø—Ä–æ—Ü–µ–Ω—Ç–æ–≤
```
secure_attachment = (raw_score / max) * 100
```

### –®–∞–≥ 2: –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ cap (–≤–µ—Ä—Ö–Ω—è—è –≥—Ä–∞–Ω–∏—Ü–∞)
```javascript
const maxValue = Math.max(...allPercentages, 70);  // –ú–∞–∫—Å. –∏–∑ –≤—Å–µ—Ö, –Ω–æ –Ω–µ –º–µ–Ω—å—à–µ 70
const capValue = Math.min(maxValue, 70);            // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º 70%
```

**–ü—Ä–∏–º–µ—Ä—ã:**
- –ï—Å–ª–∏ –º–∞–∫—Å. = 109%, —Ç–æ cap = 70% (–æ–≥—Ä–∞–Ω–∏—á–∏–ª–∏)
- –ï—Å–ª–∏ –º–∞–∫—Å. = 48%, —Ç–æ cap = 70% (–ø–æ–¥–Ω—è–ª–∏ –¥–æ –º–∏–Ω–∏–º—É–º–∞)
- –ï—Å–ª–∏ –º–∞–∫—Å. = 65%, —Ç–æ cap = 65%

### –®–∞–≥ 3: –ü–æ–¥–Ω—è—Ç–∏–µ –Ω–∏–∑–∫–∏—Ö –∑–Ω–∞—á–µ–Ω–∏–π (< 50%)
```javascript
if (value >= 50) return value;  // –û—Å—Ç–∞–≤–ª—è–µ–º –∫–∞–∫ –µ—Å—Ç—å

// –†–∞–Ω–¥–æ–º –º–µ–∂–¥—É —Ç–µ–∫—É—â–∏–º –∑–Ω–∞—á–µ–Ω–∏–µ–º –∏ cap
const boosted = random(value, capValue);
```

**–ü—Ä–∏–º–µ—Ä—ã:**

| –ò—Å—Ö–æ–¥–Ω–æ–µ | Cap | –ù–æ–≤–æ–µ (random range) |
|----------|-----|----------------------|
| 0%       | 70% | 0-70% (–Ω–∞–ø—Ä. 35%)    |
| 7%       | 70% | 7-70% (–Ω–∞–ø—Ä. 42%)    |
| 48%      | 69% | 48-69% (–Ω–∞–ø—Ä. 58%)   |
| 65%      | -   | 65% (–Ω–µ –º–µ–Ω—è–µ—Ç—Å—è)    |

### –í–∞–∂–Ω–æ:
- ‚úÖ –ù–∏–∑–∫–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è **–≤—Å–µ–≥–¥–∞** –ø–æ–¥–Ω–∏–º–∞—é—Ç—Å—è
- ‚úÖ –ù–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ **–Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –º–µ–Ω—å—à–µ** –∏—Å—Ö–æ–¥–Ω–æ–≥–æ
- ‚úÖ –ù–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ **–Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –±–æ–ª—å—à–µ** cap (70% –∏–ª–∏ –º–∞–∫—Å.)
- ‚úÖ –ó–Ω–∞—á–µ–Ω–∏—è ‚â• 50% **–Ω–µ –º–µ–Ω—è—é—Ç—Å—è**

## –ü—Ä–∏–º–µ—Ä —Ä–∞–±–æ—Ç—ã

**–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
```
attachment: { secure: 48%, anxious: 24%, avoidant: 44% }
values:     { support: 0%, passion: 7%, security: 25%, growth: 71% }
```

**–û–±—Ä–∞–±–æ—Ç–∫–∞:**
1. max = 71%, cap = 70%
2. –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è:
   - 48% ‚Üí random(48, 70) = 58%
   - 24% ‚Üí random(24, 70) = 45%
   - 44% ‚Üí random(44, 70) = 62%
   - 0%  ‚Üí random(0, 70) = 35%
   - 7%  ‚Üí random(7, 70) = 42%
   - 25% ‚Üí random(25, 70) = 51%
   - **71% –æ—Å—Ç–∞—ë—Ç—Å—è 71%** (‚â•50%)

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```
attachment: { secure: 58%, anxious: 45%, avoidant: 62% }
values:     { support: 35%, passion: 42%, security: 51%, growth: 71% }
```

## –õ–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏

```
üìä Raw scores from engine: {...}
üé≤ Normalization: max=71, cap=70
  48% ‚Üí 58% (range: 48-70)
  24% ‚Üí 45% (range: 24-70)
  0% ‚Üí 35% (range: 0-70)
  ...
```

