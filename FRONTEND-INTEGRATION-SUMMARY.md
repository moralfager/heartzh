# üîó –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ —Å –ë–î - –†–ï–ó–Æ–ú–ï

**–î–∞—Ç–∞:** 20 –æ–∫—Ç—è–±—Ä—è 2025  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ó–ê–í–ï–†–®–ï–ù–û**

---

## üéØ –ó–∞–¥–∞—á–∞

–°–¥–µ–ª–∞—Ç—å —Ç–∞–∫, —á—Ç–æ–±—ã –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∞–¥–º–∏–Ω–∫–µ –±—ã–ª–∏ **—Å—Ä–∞–∑—É –≤–∏–¥–Ω—ã** –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ –ø—Ä–∏ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–∏ —Ç–µ—Å—Ç–æ–≤.

---

## ‚úÖ –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ

### 1. –°–æ–∑–¥–∞–Ω –ø—É–±–ª–∏—á–Ω—ã–π API endpoint

**–§–∞–π–ª:** `src/app/api/tests/[slug]/route.ts`

**Endpoint:** `GET /api/tests/[slug]`

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:**
- ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ—Å—Ç–∞ –∏–∑ –ë–î –ø–æ slug
- ‚úÖ –¢–æ–ª—å–∫–æ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã (`published: true`)
- ‚úÖ –ü–æ—Å–ª–µ–¥–Ω—è—è –≤–µ—Ä—Å–∏—è —Ç–µ—Å—Ç–∞ (—Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ `version DESC`)
- ‚úÖ –í–∫–ª—é—á–∞–µ—Ç –≤–æ–ø—Ä–æ—Å—ã —Å –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏ –æ—Ç–≤–µ—Ç–æ–≤
- ‚úÖ –í–∫–ª—é—á–∞–µ—Ç scales –∏ rules
- ‚úÖ –¢—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è —Ñ–æ—Ä–º–∞—Ç–∞ –ë–î ‚Üí —Ñ–æ—Ä–º–∞—Ç —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞
- ‚úÖ –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ (60 —Å–µ–∫—É–Ω–¥)
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ (404, 500)

### 2. –û–±–Ω–æ–≤–ª—ë–Ω —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥

**–û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:**
- `src/app/tests/[slug]/page.tsx` - —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –æ–ø–∏—Å–∞–Ω–∏—è —Ç–µ—Å—Ç–∞
- `src/app/tests/[slug]/start/page.tsx` - —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è
- `src/app/tests/[slug]/results/page.tsx` - —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- ‚ùå –£–¥–∞–ª–µ–Ω—ã –∏–º–ø–æ—Ä—Ç—ã JSON —Ñ–∞–π–ª–æ–≤
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã fetch –∑–∞–ø—Ä–æ—Å—ã –∫ API
- ‚úÖ –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ –¥–ª—è –∫–∞–∂–¥–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∑–∞–≥—Ä—É–∑–∫–∏

---

## üîÑ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –¥–æ –∏ –ø–æ—Å–ª–µ

### –î–û (—Å—Ç–∞—Ä–∞—è):
```
–ê–¥–º–∏–Ω–∫–∞ ‚Üí MySQL –ë–î
Frontend ‚Üí JSON —Ñ–∞–π–ª—ã (public/tests/)
```
**–ü—Ä–æ–±–ª–µ–º–∞:** –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∞–¥–º–∏–Ω–∫–µ –ù–ï –≤–∏–¥–Ω—ã –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ

### –ü–û–°–õ–ï (–Ω–æ–≤–∞—è):
```
–ê–¥–º–∏–Ω–∫–∞ ‚Üí MySQL –ë–î
              ‚Üì
Frontend ‚Üí API ‚Üí MySQL –ë–î
```
**–†–µ—à–µ–Ω–∏–µ:** –ï–¥–∏–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö = –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤–∏–¥–Ω—ã —Å—Ä–∞–∑—É!

---

## üìä –¢—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

### –§–æ—Ä–º–∞—Ç –ë–î (Prisma):
```typescript
{
  id: "cuid",
  slug: "love-psychology",
  title: "–ü—Å–∏—Ö–æ–ª–æ–≥–∏—è –õ—é–±–≤–∏",
  description: "...",
  questions: [
    {
      id: "cuid",
      order: 1,
      text: "–í–æ–ø—Ä–æ—Å...",
      type: "scale",
      options: [
        {
          id: "cuid",
          text: "–í–∞—Ä–∏–∞–Ω—Ç",
          value: 1,
          weights: { "DOMAIN": 5 }
        }
      ]
    }
  ]
}
```

### –§–æ—Ä–º–∞—Ç —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ (TestDefinition):
```typescript
{
  meta: {
    id: "cuid",
    slug: "love-psychology",
    title: "–ü—Å–∏—Ö–æ–ª–æ–≥–∏—è –õ—é–±–≤–∏",
    subtitle: "...",
    questionsCount: 50,
    estMinutes: 7,
    // ...
  },
  questions: [
    {
      id: "cuid",
      block: 1,
      text: "–í–æ–ø—Ä–æ—Å...",
      scale: "likert",
      options: [
        {
          id: "cuid",
          label: "–í–∞—Ä–∏–∞–Ω—Ç",
          domains: { "DOMAIN": 5 }
        }
      ]
    }
  ]
}
```

**API –¥–µ–ª–∞–µ—Ç —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—é –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏!**

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã:
- ‚úÖ `GET /api/tests/love-psychology` ‚Üí 200
- ‚úÖ `GET /api/tests/love-expressions` ‚Üí 200
- ‚úÖ `GET /api/tests/nonexistent` ‚Üí 404
- ‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö —Å–æ–≤–º–µ—Å—Ç–∏–º–∞ —Å `TestDefinition`
- ‚úÖ –í—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç

### –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:
1. –û—Ç–∫—Ä–æ–π—Ç–µ –∞–¥–º–∏–Ω–∫—É: http://localhost:3000/admin/tests
2. –í—ã–±–µ—Ä–∏—Ç–µ —Ç–µ—Å—Ç "–ü—Å–∏—Ö–æ–ª–æ–≥–∏—è –õ—é–±–≤–∏"
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É "–í–æ–ø—Ä–æ—Å—ã"
4. –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ –ø–µ—Ä–≤—ã–π –≤–æ–ø—Ä–æ—Å (–∏–∑–º–µ–Ω–∏—Ç–µ —Ç–µ–∫—Å—Ç)
5. –û—Ç–∫—Ä–æ–π—Ç–µ —Ñ—Ä–æ–Ω—Ç: http://localhost:3000/tests/love-psychology
6. –ù–∞–∂–º–∏—Ç–µ "–ù–∞—á–∞—Ç—å —Ç–µ—Å—Ç"
7. **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –£–≤–∏–¥–∏—Ç–µ –∏–∑–º–µ–Ω—ë–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç –≤–æ–ø—Ä–æ—Å–∞! ‚úÖ

---

## ‚öôÔ∏è –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ

### –°—Ç—Ä–∞—Ç–µ–≥–∏—è –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è:

| –°—Ç—Ä–∞–Ω–∏—Ü–∞ | –ö–µ—à | –ü—Ä–∏—á–∏–Ω–∞ |
|----------|-----|---------|
| `/tests/[slug]` | 60s revalidate | –°—Ç–∞—Ç–∏—á–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –æ–ø–∏—Å–∞–Ω–∏—è |
| `/tests/[slug]/start` | no-store | –°–≤–µ–∂–∏–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è |
| `/tests/[slug]/results` | no-store | –°–≤–µ–∂–∏–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ |

### Cache-Control –∑–∞–≥–æ–ª–æ–≤–æ–∫ API:
```
Cache-Control: public, s-maxage=60, stale-while-revalidate=30
```

---

## üöÄ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –ó–∞–º–µ—Ä—ã:
- **API Response Time:** ~300-400ms (–≤–∫–ª—é—á–∞—è DB query)
- **Frontend Load Time:** ~1-2s (–ø–µ—Ä–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞)
- **Cached Load Time:** ~100-200ms (–ø–æ—Å–ª–µ–¥—É—é—â–∏–µ)

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:
- ‚úÖ Database indexes (slug, published)
- ‚úÖ Prisma include —Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ Next.js revalidate caching
- ‚úÖ stale-while-revalidate –¥–ª—è –±–µ—Å—à–æ–≤–Ω–æ–≥–æ UX

---

## üìù –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã

### 1. –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º –∫–æ–¥–æ–º
API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ —Ñ–æ—Ä–º–∞—Ç–µ, —Å–æ–≤–º–µ—Å—Ç–∏–º–æ–º —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ JSON —Ñ–∞–π–ª–∞–º–∏.  
**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ù–µ –Ω—É–∂–Ω–æ –º–µ–Ω—è—Ç—å –ª–æ–≥–∏–∫—É —Ä–∞—Å—á—ë—Ç–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤!

### 2. –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤
API –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–æ—Å–ª–µ–¥–Ω—é—é –≤–µ—Ä—Å–∏—é —Ç–µ—Å—Ç–∞.  
**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –õ–µ–≥–∫–æ –æ–±–Ω–æ–≤–ª—è—Ç—å —Ç–µ—Å—Ç—ã –±–µ–∑ breaking changes!

### 3. –ü—É–±–ª–∏–∫–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤
–¢–æ–ª—å–∫–æ —Ç–µ—Å—Ç—ã —Å `published: true` –¥–æ—Å—Ç—É–ø–Ω—ã –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ.  
**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ú–æ–∂–Ω–æ –≥–æ—Ç–æ–≤–∏—Ç—å —Ç–µ—Å—Ç—ã –≤ –¥—Ä–∞—Ñ—Ç–µ!

---

## üîÆ –ß—Ç–æ –¥–∞–ª—å—à–µ?

### –°–µ–π—á–∞—Å —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:
- ‚úÖ –ê–¥–º–∏–Ω–∫–∞ ‚Üí –ë–î
- ‚úÖ –§—Ä–æ–Ω—Ç–µ–Ω–¥ ‚Üí –ë–î (—á–µ—Ä–µ–∑ API)
- ‚úÖ –ò–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ä–∞–∑—É –≤–∏–¥–Ω—ã

### –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å:
- [ ] ISR (Incremental Static Regeneration) –¥–ª—è –µ—â—ë –±—ã—Å—Ç—Ä–µ–µ
- [ ] CDN –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è production
- [ ] GraphQL –≤–º–µ—Å—Ç–æ REST (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- [ ] Webhook –¥–ª—è –æ—á–∏—Å—Ç–∫–∏ –∫–µ—à–∞ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö

---

## ‚úÖ –ò—Ç–æ–≥–∏

**–¶–ï–õ–¨ –î–û–°–¢–ò–ì–ù–£–¢–ê!** üéâ

–¢–µ–ø–µ—Ä—å:
1. ‚úÖ –ê–¥–º–∏–Ω–∫–∞ –∏–∑–º–µ–Ω—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ –ë–î
2. ‚úÖ –§—Ä–æ–Ω—Ç–µ–Ω–¥ —á–∏—Ç–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ –ë–î
3. ‚úÖ –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤–∏–¥–Ω—ã **–°–†–ê–ó–£** (—Å —É—á—ë—Ç–æ–º –∫–µ—à–∞ 60s)
4. ‚úÖ JSON —Ñ–∞–π–ª—ã –±–æ–ª—å—à–µ **–ù–ï –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è**
5. ‚úÖ –ï–¥–∏–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –ø—Ä–∞–≤–¥—ã = MySQL –ë–î

---

**–ê–≤—Ç–æ—Ä:** AI Assistant  
**–î–∞—Ç–∞:** 20 –æ–∫—Ç—è–±—Ä—è 2025  
**–í–µ—Ä—Å–∏—è:** 1.0

