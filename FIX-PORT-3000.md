# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: –ü–æ—Ä—Ç 3000 –∑–∞–Ω—è—Ç

## –ü—Ä–æ–±–ª–µ–º–∞
```
failed to bind host port for 0.0.0.0:3000:172.18.0.3:3000/tcp: address already in use
```

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### –®–∞–≥ 1: –ù–∞–π–¥–∏—Ç–µ —á—Ç–æ –∑–∞–Ω–∏–º–∞–µ—Ç –ø–æ—Ä—Ç 3000

```bash
# –ù–∞–π—Ç–∏ –ø—Ä–æ—Ü–µ—Å—Å –Ω–∞ –ø–æ—Ä—Ç—É 3000
sudo lsof -i :3000

# –ò–ª–∏ —á–µ—Ä–µ–∑ netstat
sudo netstat -tlnp | grep :3000

# –ò–ª–∏ —á–µ—Ä–µ–∑ ss
sudo ss -tlnp | grep :3000
```

### –®–∞–≥ 2: –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø—Ä–æ—Ü–µ—Å—Å

#### –í–∞—Ä–∏–∞–Ω—Ç –ê: –ï—Å–ª–∏ —ç—Ç–æ —Å—Ç–∞—Ä—ã–π Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä

```bash
# –ü–æ–∫–∞–∂–∏—Ç–µ –≤—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã (–¥–∞–∂–µ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ)
sudo docker ps -a

# –ù–∞–π–¥–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã —Å –ø–æ—Ä—Ç–æ–º 3000
sudo docker ps -a | grep 3000

# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∏ —É–¥–∞–ª–∏—Ç–µ
sudo docker rm -f <CONTAINER_ID>

# –ò–õ–ò —É–¥–∞–ª–∏—Ç–µ –≤—Å–µ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
sudo docker container prune -f
```

#### –í–∞—Ä–∏–∞–Ω—Ç –ë: –ï—Å–ª–∏ —ç—Ç–æ Node.js –ø—Ä–æ—Ü–µ—Å—Å

```bash
# –ù–∞–π–¥–∏—Ç–µ PID –ø—Ä–æ—Ü–µ—Å—Å–∞
sudo lsof -i :3000
# –ó–∞–ø–æ–º–Ω–∏—Ç–µ —á–∏—Å–ª–æ –≤ –∫–æ–ª–æ–Ω–∫–µ PID

# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø—Ä–æ—Ü–µ—Å—Å
sudo kill -9 <PID>
```

#### –í–∞—Ä–∏–∞–Ω—Ç –í: –ï—Å–ª–∏ —ç—Ç–æ PM2/systemd —Å–µ—Ä–≤–∏—Å

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ PM2
pm2 list
pm2 stop all
pm2 delete all

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ systemd
sudo systemctl list-units | grep psycho
sudo systemctl stop <service-name>
```

### –®–∞–≥ 3: –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∑–∞–Ω–æ–≤–æ

```bash
cd /var/www/heartzh

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ
sudo docker compose -f docker-compose.prod.yml up -d

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ
sudo docker ps
```

---

## üöÄ –ë—ã—Å—Ç—Ä–æ–µ —Ä–µ—à–µ–Ω–∏–µ (–≤—ã–ø–æ–ª–Ω–∏—Ç–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ)

```bash
# 1. –ù–∞–π–¥–∏—Ç–µ –∏ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø—Ä–æ—Ü–µ—Å—Å –Ω–∞ –ø–æ—Ä—Ç—É 3000
sudo lsof -i :3000
# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ PID –∏–∑ –≤—ã–≤–æ–¥–∞

# 2. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø—Ä–æ—Ü–µ—Å—Å (–∑–∞–º–µ–Ω–∏—Ç–µ <PID> –Ω–∞ —á–∏—Å–ª–æ –∏–∑ —à–∞–≥–∞ 1)
sudo kill -9 <PID>

# 3. –£–¥–∞–ª–∏—Ç–µ –≤—Å–µ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
sudo docker container prune -f

# 4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∑–∞–Ω–æ–≤–æ
cd /var/www/heartzh
sudo docker compose -f docker-compose.prod.yml up -d

# 5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ
sudo docker ps
curl http://localhost
```

---

## üìã –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞: –ò–∑–º–µ–Ω–∏—Ç—å –ø–æ—Ä—Ç

–ï—Å–ª–∏ –Ω–µ –º–æ–∂–µ—Ç–µ –æ—Å–≤–æ–±–æ–¥–∏—Ç—å –ø–æ—Ä—Ç 3000, –∏–∑–º–µ–Ω–∏—Ç–µ –µ–≥–æ:

```bash
sudo nano /var/www/heartzh/docker-compose.prod.yml
```

–ò–∑–º–µ–Ω–∏—Ç–µ:
```yaml
psychotest:
  ports:
    - "3001:3000"  # –ò–∑–º–µ–Ω–∏–ª–∏ 3000 –Ω–∞ 3001
```

–ò –≤ nginx-docker.conf:
```nginx
proxy_pass http://psychotest:3000;  # –í–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –≤—Å—ë —Ä–∞–≤–Ω–æ 3000
```

–ù–æ –ª—É—á—à–µ –æ—Å–≤–æ–±–æ–¥–∏—Ç—å –ø–æ—Ä—Ç 3000!





