# üìã –ü–ª–∞–Ω —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞

> üìñ **–ü–æ–ª–Ω–∞—è —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** [ROADMAP.md](./ROADMAP.md)  
> üìä **–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞:** [PROGRESS.md](./PROGRESS.md)

## ‚úÖ –ß—Ç–æ —É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### üöÄ –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞:
- ‚úÖ –ü—Ä–æ–µ–∫—Ç –Ω–∞ Next.js 15 —Å TypeScript
- ‚úÖ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è
- ‚úÖ Nginx reverse proxy —Å HTTPS
- ‚úÖ Let's Encrypt SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã (–∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ)
- ‚úÖ GitHub Actions CI/CD
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π –Ω–∞ VPS (prod –≤–µ—Ç–∫–∞)
- ‚úÖ –î–æ–º–µ–Ω —Å HTTPS: https://heartofzha.ru

### üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:
- ‚úÖ README.md - –æ–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
- ‚úÖ WORKFLOW.md - –ø–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ Git workflow
- ‚úÖ QUICKSTART.md - –±—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
- ‚úÖ DOCKER-GUIDE.md - Docker –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
- ‚úÖ DEV-BRANCH.md - –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### üîÑ Git —Å—Ç—Ä—É–∫—Ç—É—Ä–∞:
- ‚úÖ **main** - —Å—Ç–∞–±–∏–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è
- ‚úÖ **dev** - —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ (—Å–æ–∑–¥–∞–Ω–∞ –∏ –≥–æ—Ç–æ–≤–∞)
- ‚úÖ **prod** - –ø—Ä–æ–¥–∞–∫—à–Ω —Å –∞–≤—Ç–æ–¥–µ–ø–ª–æ–µ–º

### üéØ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:
- ‚úÖ 2 –ø—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∏—Ö —Ç–µ—Å—Ç–∞ (50 –≤–æ–ø—Ä–æ—Å–æ–≤ –∫–∞–∂–¥—ã–π)
- ‚úÖ –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å —Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π
- ‚úÖ –ü—Ä–æ—Å–º–æ—Ç—Ä —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- ‚úÖ –†–µ–¥–∞–∫—Ç–æ—Ä –≤–æ–ø—Ä–æ—Å–æ–≤
- ‚úÖ –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω

---

## üéØ –¢–µ–∫—É—â–∏–π —Ñ–æ–∫—É—Å: Milestone 1 - –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∏ –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å

> üî• **–°—Ç–∞—Ç—É—Å:** –í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ  
> ‚è±Ô∏è **–°—Ä–æ–∫:** 2-3 –Ω–µ–¥–µ–ª–∏  
> üåø **–í–µ—Ç–∫–∞:** `feature/db-core-privacy`

### üìä Milestone 1: –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∏ –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: üî• –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π)

**–¶–µ–ª—å:** –ü–µ—Ä–µ–≤–µ—Å—Ç–∏ —Ç–µ—Å—Ç—ã –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ MySQL, –≤–∫–ª—é—á–∏—Ç—å –ø—Ä–∏–≤–∞—Ç–Ω—ã–µ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã (‚â§24—á) –∏ –∞–≤—Ç–æ–æ—á–∏—Å—Ç–∫—É.

### üìã –ó–∞–¥–∞—á–∏ Milestone 1:

#### ‚úÖ –ó–∞–¥–∞—á–∞ 1.1: Prisma —Å—Ö–µ–º–∞ –∏ –º–∏–≥—Ä–∞—Ü–∏–∏
**–°—Ç–∞—Ç—É—Å:** üîú –°–ª–µ–¥—É—é—â–∞—è  
**–§–∞–π–ª—ã:**
- `prisma/schema.prisma` - –ø–æ–ª–Ω–∞—è —Å—Ö–µ–º–∞ (8 —Ç–∞–±–ª–∏—Ü)
- `prisma/migrations/` - –º–∏–≥—Ä–∞—Ü–∏–∏

**–¢–∞–±–ª–∏—Ü—ã:**
```
Test (—Ç–µ—Å—Ç—ã —Å –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º)
Question (–≤–æ–ø—Ä–æ—Å—ã)
AnswerOption (–≤–∞—Ä–∏–∞–Ω—Ç—ã –æ—Ç–≤–µ—Ç–æ–≤)
Scale (—à–∫–∞–ª—ã —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤)
Rule (–ø—Ä–∞–≤–∏–ª–∞ —Ä–∞—Å—á—ë—Ç–∞)
Session (–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–µ—Å—Å–∏–∏, TTL 24—á)
Result (—Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–æ–≤)
ResultDetail (–¥–µ—Ç–∞–ª–∏ —Ä–∞—Å—á—ë—Ç–æ–≤)
ImportJob (–∏—Å—Ç–æ—Ä–∏—è –∏–º–ø–æ—Ä—Ç–æ–≤)
```

**–ö–æ–º–∞–Ω–¥—ã:**
```bash
# –°–æ–∑–¥–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é
npx prisma migrate dev --name init_schema

# –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏
npx prisma migrate deploy

# –û—Ç–∫—Ä—ã—Ç—å Prisma Studio
npx prisma studio
```

#### ‚è≥ –ó–∞–¥–∞—á–∞ 1.2: –í—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–µ—Å—Å–∏–∏ (cookie-based)
**–°—Ç–∞—Ç—É—Å:** –û–∂–∏–¥–∞–µ—Ç 1.1  
**–§–∞–π–ª—ã:**
- `src/lib/session.ts` - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è/–≤–∞–ª–∏–¥–∞—Ü–∏—è sessionId

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
```typescript
// Cookie –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:
- HttpOnly: true
- SameSite: 'Lax' (dev) / 'Strict' (prod)
- Secure: true (prod)
- MaxAge: 24 —á–∞—Å–∞
```

**Environment:**
```env
RESULT_TTL_HOURS=24
SESSION_COOKIE_NAME=hoz_sid
SESSION_COOKIE_SAMESITE=Lax
SESSION_COOKIE_SECURE=true
```

#### ‚è≥ –ó–∞–¥–∞—á–∞ 1.3: Internal API endpoints
**–°—Ç–∞—Ç—É—Å:** –û–∂–∏–¥–∞–µ—Ç 1.1, 1.2  
**–§–∞–π–ª—ã:**
- `src/app/api/internal/results/route.ts`
- `src/app/api/internal/session/route.ts`

**Endpoints:**
```typescript
POST /api/internal/results
  Body: { testId, answers }
  ‚Üí –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –¥–ª—è —Ç–µ–∫—É—â–µ–π —Å–µ—Å—Å–∏–∏

GET /api/internal/results/current
  ‚Üí –ü–æ–ª—É—á–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Ç–µ–∫—É—â–µ–π —Å–µ—Å—Å–∏–∏ (–µ—Å–ª–∏ ‚â§24—á)

GET /api/internal/session/active
  ‚Üí –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ –∞–∫—Ç–∏–≤–Ω–æ–π —Å–µ—Å—Å–∏–∏
```

#### ‚è≥ –ó–∞–¥–∞—á–∞ 1.4: –ê–≤—Ç–æ–æ—á–∏—Å—Ç–∫–∞ (cron)
**–°—Ç–∞—Ç—É—Å:** –û–∂–∏–¥–∞–µ—Ç 1.1  
**–§–∞–π–ª—ã:**
- `src/lib/cleanup-cron.ts`
- `src/app/api/cron/cleanup/route.ts` (–¥–ª—è Vercel Cron)

**–õ–æ–≥–∏–∫–∞:**
```typescript
// –£–¥–∞–ª–µ–Ω–∏–µ:
- Session –≥–¥–µ expiresAt < NOW()
- –ö–∞—Å–∫–∞–¥–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ Result + ResultDetail
- –ó–∞–ø—É—Å–∫: –∫–∞–∂–¥—ã–π —á–∞—Å —á–µ—Ä–µ–∑ Vercel Cron
```

#### ‚è≥ –ó–∞–¥–∞—á–∞ 1.5: –ò–º–ø–æ—Ä—Ç JSON ‚Üí –ë–î
**–°—Ç–∞—Ç—É—Å:** –û–∂–∏–¥–∞–µ—Ç 1.1  
**–§–∞–π–ª—ã:**
- `scripts/import-tests.ts`
- `src/lib/test-importer.ts`

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:**
```bash
# –û–¥–Ω–æ—Ä–∞–∑–æ–≤—ã–π –∏–º–ø–æ—Ä—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ç–µ—Å—Ç–æ–≤
npm run import-tests

# –ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å —á–µ—Ä–µ–∑ —Ö—ç—à —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ
# –í–∞–ª–∏–¥–∞—Ü–∏—è —á–µ—Ä–µ–∑ Zod
```

#### ‚è≥ –ó–∞–¥–∞—á–∞ 1.6: Unit —Ç–µ—Å—Ç—ã
**–°—Ç–∞—Ç—É—Å:** –û–∂–∏–¥–∞–µ—Ç 1.1-1.5  
**–§–∞–π–ª—ã:**
- `src/lib/__tests__/session.test.ts`
- `src/lib/__tests__/cleanup.test.ts`

### ‚úÖ –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏—ë–º–∫–∏ Milestone 1:
- [ ] –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–æ–∑–¥–∞—é—Ç—Å—è –∏ —á–∏—Ç–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ —Ç–µ—á–µ–Ω–∏–µ 24 —á–∞—Å–æ–≤ –æ–¥–Ω–æ–π —Å–µ—Å—Å–∏–∏
- [ ] –ü–æ—Å–ª–µ TTL —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã —Å –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–π —Å—Ç–æ—Ä–æ–Ω—ã
- [ ] –°—Ç–∞—Ä—ã–µ –∑–∞–ø–∏—Å–∏ —Ä–µ–∞–ª—å–Ω–æ —É–¥–∞–ª—è—é—Ç—Å—è –ø–æ –∫—Ä–æ–Ω—É
- [ ] –ò–º–ø–æ—Ä—Ç JSON ‚Üí –ë–î —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] Unit —Ç–µ—Å—Ç—ã –ø–æ–∫—Ä—ã–≤–∞—é—Ç ‚â•80% –∫–æ–¥–∞
- [ ] –í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ API < 200ms

### üîÑ Workflow Milestone 1:
```bash
# 1. –°–æ–∑–¥–∞—Ç—å feature –≤–µ—Ç–∫—É
git checkout dev
git checkout -b feature/db-core-privacy

# 2. –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∑–∞–¥–∞—á–∏ 1.1 ‚Üí 1.6

# 3. –ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–π –∑–∞–¥–∞—á–∏ - –∫–æ–º–º–∏—Ç
git add .
git commit -m "feat(db): –æ–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏"

# 4. –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≤—Å–µ—Ö –∑–∞–¥–∞—á
npm run lint
npm run build
npm run test

# 5. –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
docker-compose -f docker-compose.prod.yml up --build

# 6. –°–ª–∏—Ç—å –≤ dev
git checkout dev
git merge --no-ff feature/db-core-privacy
git push origin dev

# 7. –û–±–Ω–æ–≤–∏—Ç—å PROGRESS.md

# 8. –°–æ–∑–¥–∞—Ç—å PR –≤ main (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
```

---

---

## üîú –°–ª–µ–¥—É—é—â–∏–µ Milestones (–ø–æ—Å–ª–µ M1)

### üìã Milestone 2: –ê–¥–º–∏–Ω CRUD (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: üî• –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π)

**–¶–µ–ª—å:** –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–µ—Å—Ç–∞–º–∏ –∏–∑ –ë–î –±–µ–∑ –ø—Ä–∞–≤–∫–∏ JSON

**–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ:**
- CRUD –¥–ª—è Test, Question, AnswerOption, Scale, Rule
- –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤
- Drag&drop —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞
- –ò–º–ø–æ—Ä—Ç JSON –ø–æ —à–∞–±–ª–æ–Ω—É

**–í–µ—Ç–∫–∞:** `feature/admin-crud`  
**–°—Ä–æ–∫:** 2-3 –Ω–µ–¥–µ–ª–∏

---

### üìã Milestone 3: –õ–æ–≥–∏–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: üî• –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π)

**–¶–µ–ª—å:** –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –ø—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∞—è –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–æ–≤

**–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ:**
- –î–≤–∏–∂–æ–∫ —Ä–∞—Å—á—ë—Ç–∞ (pure function)
- DSL –ø—Ä–∞–≤–∏–ª (threshold/formula/combo)
- Unit —Ç–µ—Å—Ç—ã –Ω–∞ —ç—Ç–∞–ª–æ–Ω–∞—Ö
- –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ä–∞—Å—á—ë—Ç—ã

**–í–µ—Ç–∫–∞:** `feature/result-engine`  
**–°—Ä–æ–∫:** 2-3 –Ω–µ–¥–µ–ª–∏

---

### üìã Milestone 4: UX —Å–µ—Å—Å–∏–π (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: üü¢ –°—Ä–µ–¥–Ω–∏–π)

**–¶–µ–ª—å:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∫–æ–º—Ñ–æ—Ä—Ç –±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

**–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ:**
- –ö–Ω–æ–ø–∫–∞ "–ú–æ–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã" –Ω–∞ –≥–ª–∞–≤–Ω–æ–π
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
- –ü–ª–∞–≤–Ω—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã
- –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä –∏ –∞–Ω–∏–º–∞—Ü–∏–∏

**–í–µ—Ç–∫–∞:** `feature/session-ux`  
**–°—Ä–æ–∫:** 1-2 –Ω–µ–¥–µ–ª–∏

---

### üìã Milestone 5: –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: üü¢ –°—Ä–µ–¥–Ω–∏–π)

**–¶–µ–ª—å:** –ë–∞–∑–æ–≤–æ–µ –ø–æ–Ω–∏–º–∞–Ω–∏–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π

**–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ:**
- –ì—Ä–∞—Ñ–∏–∫–∏ –ø–æ —à–∫–∞–ª–∞–º
- –§–∏–ª—å—Ç—Ä—ã –ø–æ –¥–∞—Ç–∞–º/–≤–µ—Ä—Å–∏—è–º
- –ü—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å (—Ç–æ–ª—å–∫–æ –∞–≥—Ä–µ–≥–∞—Ç—ã)

**–í–µ—Ç–∫–∞:** `feature/admin-mini-analytics`  
**–°—Ä–æ–∫:** 1-2 –Ω–µ–¥–µ–ª–∏

---

## üìà –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π Workflow –¥–ª—è –≤—Å–µ—Ö Milestones

### –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å:

```bash
# 1. –°–æ–∑–¥–∞—Ç—å feature –≤–µ—Ç–∫—É –æ—Ç dev
git checkout dev
git pull origin dev
git checkout -b feature/–Ω–∞–∑–≤–∞–Ω–∏–µ-–∑–∞–¥–∞—á–∏

# 2. –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –∏ –∫–æ–º–º–∏—Ç—ã
# ... –¥–µ–ª–∞–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è ...
git add .
git commit -m "feat: –æ–ø–∏—Å–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π"
git push origin feature/–Ω–∞–∑–≤–∞–Ω–∏–µ-–∑–∞–¥–∞—á–∏

# 3. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
npm run lint
npm run build
docker-compose -f docker-compose.prod.yml up --build

# 4. –°–ª–∏—Ç—å –≤ dev
git checkout dev
git merge feature/–Ω–∞–∑–≤–∞–Ω–∏–µ-–∑–∞–¥–∞—á–∏
git push origin dev

# 5. –£–¥–∞–ª–∏—Ç—å feature –≤–µ—Ç–∫—É
git branch -d feature/–Ω–∞–∑–≤–∞–Ω–∏–µ-–∑–∞–¥–∞—á–∏
git push origin --delete feature/–Ω–∞–∑–≤–∞–Ω–∏–µ-–∑–∞–¥–∞—á–∏

# 6. –ö–æ–≥–¥–∞ dev —Å—Ç–∞–±–∏–ª—å–Ω–∞ - –≤ main
git checkout main
git merge dev
git push origin main

# 7. –î–µ–ø–ª–æ–π –≤ prod (–∫–æ–≥–¥–∞ –≥–æ—Ç–æ–≤—ã –∫ —Ä–µ–ª–∏–∑—É)
git checkout prod
git merge main
git push origin prod  # üöÄ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π!
```

---

## üîÑ –ß–∞—Å—Ç–æ—Ç–∞ —Ä–µ–ª–∏–∑–æ–≤

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –≥—Ä–∞—Ñ–∏–∫:

- **dev ‚Üí main**: –ü–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –∫–∞–∂–¥–æ–π —Ñ–∞–∑—ã –∏–ª–∏ –∫—Ä—É–ø–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏
- **main ‚Üí prod**: 1-2 —Ä–∞–∑–∞ –≤ –Ω–µ–¥–µ–ª—é (–ø—è—Ç–Ω–∏—Ü–∞ –≤–µ—á–µ—Ä –∏–ª–∏ –≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ)
- **Hotfix**: –ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ –ø—Ä–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –±–∞–≥–∞—Ö

---

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞

### ‚úÖ DO (–î–µ–ª–∞—Ç—å):
1. **–í—Å–µ–≥–¥–∞ —Ä–∞–±–æ—Ç–∞—Ç—å –≤ dev** –¥–ª—è –Ω–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
2. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ** –ø–µ—Ä–µ–¥ push
3. **–î–µ–ª–∞—Ç—å —á–∞—Å—Ç—ã–µ –∫–æ–º–º–∏—Ç—ã** —Å –ø–æ–Ω—è—Ç–Ω—ã–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏
4. **–î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è** –≤ README/CHANGELOG
5. **–ü—Ä–æ–≤–µ—Ä—è—Ç—å GitHub Actions** –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è
6. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å feature branches** –¥–ª—è –±–æ–ª—å—à–∏—Ö –∑–∞–¥–∞—á

### ‚ùå DON'T (–ù–µ –¥–µ–ª–∞—Ç—å):
1. **–ù–µ –∫–æ–º–º–∏—Ç–∏—Ç—å –Ω–∞–ø—Ä—è–º—É—é –≤ prod**
2. **–ù–µ –ø—É—à–∏—Ç—å –Ω–µ—Ä–∞–±–æ—Ç–∞—é—â–∏–π –∫–æ–¥**
3. **–ù–µ —É–¥–∞–ª—è—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é**
4. **–ù–µ —Ö–∞—Ä–¥–∫–æ–¥–∏—Ç—å –ø–∞—Ä–æ–ª–∏ –∏ –∫–ª—é—á–∏**
5. **–ù–µ –∏–∑–º–µ–Ω—è—Ç—å prod –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –±–µ–∑ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è**
6. **–ù–µ –¥–µ–ª–∞—Ç—å force push** –≤ –æ—Å–Ω–æ–≤–Ω—ã–µ –≤–µ—Ç–∫–∏

---

## üìù –®–∞–±–ª–æ–Ω—ã –∫–æ–º–º–∏—Ç–æ–≤

### –¢–∏–ø—ã:
- `feat:` - –Ω–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è
- `fix:` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–≥–∞
- `docs:` - –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- `style:` - —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, —Å—Ç–∏–ª–∏
- `refactor:` - —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥
- `test:` - —Ç–µ—Å—Ç—ã
- `chore:` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- `perf:` - –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### –ü—Ä–∏–º–µ—Ä—ã:
```bash
git commit -m "feat: –¥–æ–±–∞–≤–ª–µ–Ω–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å MySQL"
git commit -m "fix: –∏—Å–ø—Ä–∞–≤–ª–µ–Ω —Ä–∞—Å—á–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Ç–µ—Å—Ç–∞"
git commit -m "docs: –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API"
git commit -m "style: —É–ª—É—á—à–µ–Ω –¥–∏–∑–∞–π–Ω –∫–∞—Ä—Ç–æ—á–µ–∫ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤"
git commit -m "refactor: –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ —Ä–∞–±–æ—Ç–∞ —Å –ë–î"
git commit -m "perf: –¥–æ–±–∞–≤–ª–µ–Ω–æ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤"
```

---

## üéØ –¢–µ–∫—É—â–∏–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã

### –ù–µ–¥–µ–ª—è 1-2: –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Prisma schema
- [ ] –°–æ–∑–¥–∞—Ç—å API endpoints
- [ ] –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏ –∑–∞–¥–µ–ø–ª–æ–∏—Ç—å

### –ù–µ–¥–µ–ª—è 3-4: UI —É–ª—É—á—à–µ–Ω–∏—è
- [ ] –î–æ–±–∞–≤–∏—Ç—å –∞–Ω–∏–º–∞—Ü–∏–∏
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ç–µ–º–Ω—É—é —Ç–µ–º—É
- [ ] –£–ª—É—á—à–∏—Ç—å –º–æ–±–∏–ª—å–Ω—ã–π –≤–∏–¥
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏ –∑–∞–¥–µ–ø–ª–æ–∏—Ç—å

### –ù–µ–¥–µ–ª—è 5+: –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
- [ ] –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ –≥—Ä–∞—Ñ–∏–∫–∏
- [ ] PWA —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª
- [ ] –≠–∫—Å–ø–æ—Ä—Ç –≤ PDF
- [ ] ...

---

## üöÄ –ò—Ç–æ–≥–æ–≤–∞—è —Å—Ö–µ–º–∞ workflow

```
Feature Branch ‚Üí dev ‚Üí main ‚Üí prod (Auto-deploy –Ω–∞ VPS)
     ‚Üì            ‚Üì      ‚Üì      ‚Üì
 –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞   –¢–µ—Å—Ç–∏—Ä. –°—Ç–∞–±–∏–ª.  Production
              –ª–æ–∫–∞–ª—å–Ω–æ  –≤–µ—Ä—Å–∏—è  heartofzha.ru
```

---

## üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã –∏ —Ä–µ—Å—É—Ä—Å—ã

### GitHub:
- **–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:** https://github.com/moralfager/heartzh
- **Actions:** https://github.com/moralfager/heartzh/actions
- **Issues:** https://github.com/moralfager/heartzh/issues

### –ü—Ä–æ–¥–∞–∫—à–Ω:
- **–°–∞–π—Ç:** https://heartofzha.ru
- **–ê–¥–º–∏–Ω:** https://heartofzha.ru/admin
- **VPS:** 85.202.192.68

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:
- [WORKFLOW.md](./WORKFLOW.md) - Git workflow
- [QUICKSTART.md](./QUICKSTART.md) - –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
- [DEV-BRANCH.md](./.github/DEV-BRANCH.md) - Dev –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
- [DOCKER-GUIDE.md](./DOCKER-GUIDE.md) - Docker —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ

---

**üöÄ –ì–æ—Ç–æ–≤–æ –∫ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ! –£–¥–∞—á–∏ —Å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–µ–π –Ω–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π!**

