# ‚úÖ –ì–û–¢–û–í–û –ö –î–ï–ü–õ–û–Æ (–ë–ï–ó SSL)!

## üì¶ –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ

### –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:
- ‚úÖ `nginx-http-only.conf` - –≤—Ä–µ–º–µ–Ω–Ω—ã–π –∫–æ–Ω—Ñ–∏–≥ –ë–ï–ó SSL (—Ç–æ–ª—å–∫–æ HTTP)
- ‚úÖ `SETUP-SSL.md` - –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ SSL –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è

### –û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:
- ‚úÖ `docker-compose.prod.yml` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç HTTP-only –∫–æ–Ω—Ñ–∏–≥
- ‚úÖ `START-HERE.md` - –¥–æ–±–∞–≤–ª–µ–Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –¥–µ–ø–ª–æ–µ –±–µ–∑ SSL
- ‚úÖ `.github/workflows/deploy.yml` - —Ç–µ—Å—Ç—ã –Ω–µ –±–ª–æ–∫–∏—Ä—É—é—Ç –¥–µ–ø–ª–æ–π

---

## üöÄ –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò

### 1. –ü—Ä–æ–≤–µ—Ä—å GitHub Secrets

–ó–∞–π–¥–∏ –≤ **GitHub ‚Üí Settings ‚Üí Secrets and variables ‚Üí Actions**

–£–±–µ–¥–∏—Å—å —á—Ç–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã:
```
SSH_PRIVATE_KEY = <—Ç–≤–æ–π SSH –∫–ª—é—á>
SERVER_HOST = 85.202.192.68  ‚Üê –í–ê–ñ–ù–û: IP –∞–¥—Ä–µ—Å, –ù–ï –¥–æ–º–µ–Ω!
SERVER_USER = root
SERVER_PATH = /root/psychotest
```

**‚ùå –ù–ï –ò–°–ü–û–õ–¨–ó–£–ô:** `heartofzha.ru` –≤ SERVER_HOST  
**‚úÖ –ò–°–ü–û–õ–¨–ó–£–ô:** `85.202.192.68`

---

### 2. –î–µ–ø–ª–æ–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä

```bash
git add .
git commit -m "Deploy without SSL (first deploy)"
git push origin prod
```

**–ß—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥—ë—Ç:**
1. GitHub Actions –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
2. –°–æ–±–µ—Ä—ë—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
3. –ü–æ–¥–∫–ª—é—á–∏—Ç—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É –ø–æ SSH
4. –ó–∞–ø—É—Å—Ç–∏—Ç docker-compose
5. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –Ω–∞ **http://heartofzha.ru** (–ë–ï–ó https)

---

### 3. –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è

**–ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
```bash
# –í –±—Ä–∞—É–∑–µ—Ä–µ
http://heartofzha.ru

# –ò–ª–∏ –∫–æ–º–∞–Ω–¥–æ–π
curl http://heartofzha.ru/api/health
```

**–î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å:**
```json
{"status":"healthy","services":{"database":"connected","api":"running"}}
```

---

### 4. –ù–∞—Å—Ç—Ä–æ–π SSL (HTTPS)

–ö–æ–≥–¥–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ HTTP, –Ω–∞—Å—Ç—Ä–æ–π SSL:

üìñ **–°–ª–µ–¥—É–π –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º:** `SETUP-SSL.md`

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:
- ‚úÖ https://heartofzha.ru - —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –∑–µ–ª—ë–Ω—ã–º –∑–∞–º–æ—á–∫–æ–º üîí
- ‚úÖ http://heartofzha.ru - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–µ–¥–∏—Ä–µ–∫—Ç–∏—Ç –Ω–∞ https

---

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –¥–µ–ø–ª–æ—è

### –°–º–æ—Ç—Ä–∏ –ø—Ä–æ—Ü–µ—Å—Å –≤ GitHub Actions:
https://github.com/YOUR_USERNAME/YOUR_REPO/actions

### –õ–æ–≥–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:
```bash
ssh root@85.202.192.68
cd /root/psychotest
docker-compose -f docker-compose.prod.yml logs -f
```

---

## üÜò –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫

### GitHub Actions —É–ø–∞–ª —Å "missing server host"
‚Üí –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ `SERVER_HOST = 85.202.192.68` (IP, –Ω–µ –¥–æ–º–µ–Ω!)

### Nginx –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
‚Üí –≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å—Ç–∞—Ä—ã–π –∫–æ–Ω—Ñ–∏–≥ —Å SSL
‚Üí –£–±–µ–¥–∏—Å—å —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `nginx-http-only.conf` –≤ docker-compose

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–µ —Å–æ–∑–¥–∞—ë—Ç—Å—è
‚Üí –ü–æ–¥–æ–∂–¥–∏ 30 —Å–µ–∫—É–Ω–¥ –¥–ª—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
‚Üí –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏: `docker-compose -f docker-compose.prod.yml logs mysql`

### –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç
‚Üí –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏: `docker-compose -f docker-compose.prod.yml logs psychotest`
‚Üí –ü—Ä–æ–≤–µ—Ä—å `.env.production` –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

---

## üìñ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **START-HERE.md** - –±—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
- **SETUP-SSL.md** - –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ SSL –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è
- **README.md** - –ø–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

---

**–ì–æ—Ç–æ–≤ –¥–µ–ø–ª–æ–∏—Ç—å?** üöÄ

1. –ü—Ä–æ–≤–µ—Ä—å GitHub Secrets ‚úÖ
2. Push –≤ prod ‚úÖ
3. –ñ–¥–∏ ~2-3 –º–∏–Ω—É—Ç—ã ‚è≥
4. –ü—Ä–æ–≤–µ—Ä—å http://heartofzha.ru ‚úÖ
5. –ù–∞—Å—Ç—Ä–æ–π SSL üîí




